type: pipeline-template
version: 1

name: Java Maven CI with Sonar, Trivy & Kaniko
displayName: Java CI â€“ Build, Scan, Image & SBOM

description: >
  Enterprise Java CI pipeline.
  Automatically checks out source code, builds with Maven,
  runs SonarQube analysis, performs Trivy security scans,
  builds and pushes Docker images using Kaniko,
  and generates SBOM reports.
  Image names are derived automatically from repository names.

parameters:
  - name: repoUrl
    type: string
    displayName: Git Repository URL
    description: URL of the Git repository
    required: true

  - name: branchName
    type: string
    displayName: Git Branch
    description: Branch to build
    defaultValue: main

  - name: gitCredentials
    type: credentials
    displayName: Git Credentials
    description: Git PAT / SSH credentials stored in Jenkins
    required: true

  - name: sonarProjectKey
    type: string
    displayName: SonarQube Project Key
    description: Unique project key in SonarQube
    required: true
